<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GuardianTix</title>
    <!-- Pastikan link CSS ini benar dan file CSS-nya berisi kode Anda -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/user/homepage.css') }}">
</head>
<body>

    <!-- Flash Messages (Tetap Sama) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-container">
          {% for category, message in messages %}
            <!-- Menggunakan class flash-message sesuai CSS Anda -->
            <div class="flash-message {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Navigasi (Tetap Sama) -->
    <nav>
      <div class="logo">GuardianTix</div>
      <div id="authSection" class="user-info">
        {% if session.get('username') %}
          Halo, {{ session['username'] }} |
          <a href="{{ url_for('homepage') }}">Home</a> |
          <a href="{{ url_for('account') }}">My Account</a> |
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a href="{{ url_for('login') }}">Login</a> |
          <a href="{{ url_for('register') }}">Register</a>
        {% endif %}
      </div>
    </nav>

    <!-- Hero Section (Tetap Sama) -->
    <section class="hero">
      <!-- Kita bisa buat judul hero dinamis jika perlu, tapi sementara tetap -->
      <h1>Reality Club</h1>
      <p>one night, one story, endless memories.</p>
      {% if session.get('username') %}
        <div class="welcome-message">
          Welcome back, {{ session['username'] }}! Ready for some magical concerts?
        </div>
      {% endif %}
    </section>

    <!-- World Tour Section (Tetap Sama) -->
    <section>
      <h2>Indonesia Tour 2025</h2>
      <p>Reality Club: A night to remember<br>by PBL RKS 306</p>
    </section>

    <!-- Main Event Highlight -->
    <section>
        <!-- Menggunakan class 'cities' seperti di kode asli Anda -->
        <div class="cities"
             style="display: grid; grid-template-columns: repeat(2, 1fr);
                    gap: 20px; max-width: 1200px; margin: 0 auto;">

            <!-- ============================================== -->
            <!-- == BAGIAN INI YANG KITA UBAH MENJADI DINAMIS == -->
            <!-- ============================================== -->

            {% for event in events %}
            <!-- Struktur Card Sama Persis Seperti Kode Asli Anda -->
            <div class="city-card" style="text-align: center; padding: 30px;">
                <!-- Menggunakan style inline h3 seperti asli -->
                <h3 style="font-size: 1.8em;">{{ event.name }}</h3>
                <!-- Menggunakan style inline p seperti asli -->
                <p style="font-size: 1.3em; color: #C8A2C8;">{{ event.location }}</p>

                <!-- Menggunakan style inline p seperti asli, format tanggal disesuaikan -->
                <p style="margin: 20px 0; font-size: 1.1em;">
                    🗓️ {{ event.event_date.strftime('%A, %d %B %Y') }} <br>
                    <!-- ⏰ Waktu belum ada di DB, bisa ditambahkan nanti atau dihapus -->
                    <!-- ⏰ 18.30 wita -->
                     ⭐️ Status: {{ event.status }} <!-- Menambahkan Status -->
                </p>

                <!-- Menghilangkan 'Sold Tickets' sementara -->
                <!-- <div class="rating" style="font-size: 1.3em;">Sold ??? tickets</div> -->

                <!-- Menggunakan style inline div dan class button seperti asli -->
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                    <a href="javascript:void(0)" onclick="bookingModal.open('{{ event.name | escape }}', {{ event.id }})" class="btn btn-primary">Find Tickets</a>
                </div>
            </div>
            {% else %}
            <!-- Pesan jika tidak ada event, dengan styling sederhana -->
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #A7A9BE;">
                <p>There are currently no upcoming events. Please check back later!</p>
            </div>
            {% endfor %}

            <!-- ============================================== -->
            <!-- == AKHIR BAGIAN YANG DIUBAH == -->
            <!-- ============================================== -->

        </div>
    </section>

    <!-- Footer (Tetap Sama) -->
    <footer>
      <h2 style="color: #FFD700;">Contact Person</h2>
      <div class="contact-item">
        <p>Jam kerja: Senin - Jumat, 09:00 - 17:00</p>
        <p>📞 <a href="tel:+62211234567">+62 21-1234-567</a></p>
        <p>✉️ <a href="mailto:info@guardiantix.com">info@guardiantix.com</a></p>
      </div>
      <p style="margin-top:20px; color: #C8A2C8;">© 2024 GuardianTix — All rights reserved.</p>
    </footer>

    <!-- Modal (Tetap Sama, perlu penyesuaian JS jika data tiket dinamis) -->
    <div id="ticketModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="bookingModal.close()">&times;</span>
        <h2 id="modalTitle" style="color: #FFD700;">Book Tickets</h2>
        <p id="modalInfo" style="color: #C8A2C8;"></p>
        <div class="ticket-options">
          <div class="ticket-card" onclick="bookingModal.select(this,'Standard')"><h4>Standard</h4><p>Rp 450.000</p></div>
          <div class="ticket-card" onclick="bookingModal.select(this,'Premium')"><h4>Premium</h4><p>Rp 850.000</p></div>
          <div class="ticket-card" onclick="bookingModal.select(this,'VIP')"><h4>VIP</h4><p>Rp 1.250.000</p></div>
        </div>
        <button id="selectBtn" onclick="bookingModal.confirm()">Select Tickets</button>
      </div>
    </div>

    <!-- Script JS (Tetap Sama) -->
    <script src="{{ url_for('static', filename='script/user/homepage.js') }}"></script>
</body>
</html>

